---
title: "OAuth 개념 이해하기"
excerpt: "with RFC6749"

categories:
  - Programming
tags:
  - [OAuth, security, network]

date: 2022-07-22
toc: true
toc_sticky: true
toc_label: "OAuth 개념 이해하기"
---

OAuth([발음은 oh-auth](https://www.hp.com/us-en/shop/tech-takes/what-is-oauth). 간혹 오쓰라고 발음하는 사람도 있는데... 머 발음이 중요한 토픽은 아니니 오쓰 오어쓰 오오쓰 대충 알아듣기만 하면 된다)

OAuth는 기본적으로 **안전하게 서드파티 애플리케이션에 접근 권한을 부여하는 표준적인 방식**이라고 할 수 있을 것이다.<br>
표준은 당연히 표준 문서를 제공하는데, [여기](https://datatracker.ietf.org/doc/html/rfc6749#section-1)에서 RFC6749를 읽어볼 수 있다.

# OAuth란?

## OAuth의 등장 배경

기존의 전통적인 클라이언트-서버 인증 모델에서는 서드파티 애플리케이션에 유저의 인증 정보(쉽게말해 ID/PW)를 제공해야 했다. 그 과정에서 문제가 생기는데,

- 유저의 비밀번호를 평문으로 저장하거나
- 서드파티 애플리케이션과의 호환을 위해 ID/PW 인증 방식이 강제되었으며
- 서드파티 애플리케이션이 유저의 정보에 과도하게 접근이 가능했고
- 애플리케이션 각각에 대한 접근 권한을 관리하거나 회수할 수 없었다.
- 또한 한 군데에서 보안상의 문제(ID/PW 유출 등)가 생기면 다른 모든 곳에도 보안 이슈가 생긴다.

## OAuth는 보안 이슈를 어떻게 해결했는가?

따라서 OAuth는 사용자의 정보에 접근하기 위해 서드파티 애플리케이션이 인증 정보를(즉 ID와 PW) 직접적으로 사용하는 대신, 각 서드파티 애플리케이션별로 토큰을 발행해서 접근 범위, 기간, 기타 설정을 제어하도록 해 보안 이슈를 해결했다.<br>
이러한 방식의 이점은

> **비밀번호 평문 저장 문제 해결**<br>
> **ID/PW 대신 다른 보안 매체로도 접근 가능**<br>
> **과도한 접근 문제 해결**<br>
> **서드파티 애플리케이션별 접근 권한 재지정/해제 가능**


## OAuth의 기본 작동 방식

![](/assets/posts/220722/protocol-flow.png)

하나. 서드파티 애플리케이션이 유저에게 인증을 요청한다.<br>
둘. 유저는 서드파티 애플리케이션에 권한을 제공한다.<br>
셋. 서드파티 애플리케이션은 인증 서버에 유저의 권한을 제시하고<br>
넷. 인증 서버는 서드파티 애플리케이션에 토큰을 발급한다.<br>
다섯. 서드파티 애플리케이션은 리소스 서버에 토큰을 제시하고<br>
여섯. 리소스 서버는 서드파티 애플리케이션에 리소스를 제공한다.

여기서 알 수 있듯이, 유저의 아이디와 비밀번호를 서드파티 애플리케이션이 직접적으로 저장하는 것이 아니라 **토큰**을 이용하여 리소스 서버와 통신하는 것이 OAuth의 특징이다.

이 과정에서 발급되는 엑세스 토큰은 [RFC6750](https://datatracker.ietf.org/doc/html/rfc6750) 문서에 설명되어 있다.

